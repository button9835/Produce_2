import{f as G,a as L}from"../chunks/hYXSixqt.js";import{i as W}from"../chunks/CEgW56lK.js";import{a as H,$ as ie,V as O,h as S,M as le,S as fe,k as C,au as ue,av as pe,a1 as ce,aa as Y,am as U,e as R,a0 as de,ar as ve,a8 as J,c as ge,aw as T,b as P,s as _e,X as K,j as me,ap as X,ax as he,ay as be,az as we,aA as Ee,r as Z,p as j,aB as q,ak as $e,ao as ye,d as Se,E as ee,H as re,J as x,I as N,K as F,G as ae,F as Te}from"../chunks/gf6d7vAL.js";import{s as D,e as Ae}from"../chunks/CE3gFhLj.js";import{s as te,a as ne}from"../chunks/CkZB2j_x.js";import{w as ke}from"../chunks/DY93X3wS.js";import{s as xe}from"../chunks/BzCQ3vOg.js";function Ce(e,s){return s}function Ie(e,s,i){for(var l=[],u=s.length,a,o=s.length,r=0;r<u;r++){let p=s[r];j(p,()=>{if(a){if(a.pending.delete(p),a.done.add(p),a.pending.size===0){var d=e.outrogroups;V(X(a.done)),d.delete(a),d.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=l.length===0&&i!==null;if(f){var n=i,c=n.parentNode;ye(c),c.append(n),e.items.clear()}V(s,!f)}else a={pending:new Set(s),done:new Set},(e.outrogroups??=new Set).add(a)}function V(e,s=!0){for(var i=0;i<e.length;i++)Se(e[i],s)}var Q;function Ne(e,s,i,l,u,a=null){var o=e,r=new Map;{var f=e;o=S?O(le(f)):f.appendChild(H())}S&&fe();var n=null,c=ue(()=>{var v=i();return he(v)?v:v==null?[]:X(v)}),p,d=!0;function w(){g.fallback=n,Fe(g,p,o,s,l),n!==null&&(p.length===0?(n.f&T)===0?Z(n):(n.f^=T,M(n,null,o)):j(n,()=>{n=null}))}var t=ie(()=>{p=C(c);var v=p.length;let h=!1;if(S){var _=pe(o)===ce;_!==(v===0)&&(o=Y(),O(o),U(!1),h=!0)}for(var A=new Set,b=ge,k=_e(),$=0;$<v;$+=1){S&&R.nodeType===de&&R.data===ve&&(o=R,h=!0,U(!1));var I=p[$],m=l(I,$),E=d?null:r.get(m);E?(E.v&&J(E.v,I),E.i&&J(E.i,$),k&&b.skipped_effects.delete(E.e)):(E=Me(r,d?o:Q??=H(),I,m,$,u,s,i),d||(E.e.f|=T),r.set(m,E)),A.add(m)}if(v===0&&a&&!n&&(d?n=P(()=>a(o)):(n=P(()=>a(Q??=H())),n.f|=T)),S&&v>0&&O(Y()),!d)if(k){for(const[se,oe]of r)A.has(se)||b.skipped_effects.add(oe.e);b.oncommit(w),b.ondiscard(()=>{})}else w();h&&U(!0),C(c)}),g={effect:t,items:r,outrogroups:null,fallback:n};d=!1,S&&(o=R)}function Fe(e,s,i,l,u){var a=s.length,o=e.items,r=e.effect.first,f,n=null,c=[],p=[],d,w,t,g;for(g=0;g<a;g+=1){if(d=s[g],w=u(d,g),t=o.get(w).e,e.outrogroups!==null)for(const m of e.outrogroups)m.pending.delete(t),m.done.delete(t);if((t.f&T)!==0)if(t.f^=T,t===r)M(t,null,i);else{var v=n?n.next:r;t===e.effect.last&&(e.effect.last=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),y(e,n,t),y(e,t,v),M(t,v,i),n=t,c=[],p=[],r=n.next;continue}if((t.f&q)!==0&&Z(t),t!==r){if(f!==void 0&&f.has(t)){if(c.length<p.length){var h=p[0],_;n=h.prev;var A=c[0],b=c[c.length-1];for(_=0;_<c.length;_+=1)M(c[_],h,i);for(_=0;_<p.length;_+=1)f.delete(p[_]);y(e,A.prev,b.next),y(e,n,A),y(e,b,h),r=h,n=b,g-=1,c=[],p=[]}else f.delete(t),M(t,r,i),y(e,t.prev,t.next),y(e,t,n===null?e.effect.first:n.next),y(e,n,t),n=t;continue}for(c=[],p=[];r!==null&&r!==t;)(f??=new Set).add(r),p.push(r),r=r.next;if(r===null)continue}(t.f&T)===0&&c.push(t),n=t,r=t.next}if(e.outrogroups!==null){for(const m of e.outrogroups)m.pending.size===0&&(V(X(m.done)),e.outrogroups?.delete(m));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||f!==void 0){var k=[];if(f!==void 0)for(t of f)(t.f&q)===0&&k.push(t);for(;r!==null;)(r.f&q)===0&&r!==e.fallback&&k.push(r),r=r.next;var $=k.length;if($>0){var I=a===0?i:null;Ie(e,k,I)}}}function Me(e,s,i,l,u,a,o,r){var f=(o&be)!==0?(o&we)===0?me(i,!1,!1):K(i):null,n=(o&Ee)!==0?K(u):null;return{v:f,i:n,e:P(()=>(a(s,f??i,n??u,r),()=>{e.delete(l)}))}}function M(e,s,i){if(e.nodes)for(var l=e.nodes.start,u=e.nodes.end,a=s&&(s.f&T)===0?s.nodes.start:i;l!==null;){var o=$e(l);if(a.before(l),l===u)return;l=o}}function y(e,s,i){s===null?e.effect.first=i:s.next=i,i===null?e.effect.last=s:i.prev=s}function Re(e,s){return e==null?null:String(e)}function De(e,s,i,l){var u=e.__style;if(S||u!==s){var a=Re(s);(!S||a!==e.getAttribute("style"))&&(a==null?e.removeAttribute("style"):e.style.cssText=a),e.__style=s}return l}const ze={resource:10,pdrs:[{amount:0,mult:1,price:10,purchase_count:0},{amount:0,mult:1,price:100,purchase_count:0},{amount:0,mult:1,price:1e4,purchase_count:0},{amount:0,mult:1,price:1e8,purchase_count:0}],lastUpdate:Date.now()};function He(){const{subscribe:e,update:s}=ke(ze);function i(){s(l=>{const u=Date.now(),a=(u-l.lastUpdate)/1e3,o={...l};o.lastUpdate=u,o.resource+=o.pdrs[0].amount*o.pdrs[0].mult*a;for(let r=0;r<o.pdrs.length-1;r++){const f=o.pdrs[r+1];o.pdrs[r].amount+=f.amount*f.mult*a}return o}),window.requestAnimationFrame(i)}return typeof window<"u"&&i(),{subscribe:e,buyPdr:l=>s(u=>{if(u.pdrs[l].price<=u.resource){const a={...u};switch(a.resource-=a.pdrs[l].price,a.pdrs[l].purchase_count++,a.pdrs[l].amount++,l){case 0:a.pdrs[l].price*=10;break;case 1:a.pdrs[l].price*=100;break;case 2:a.pdrs[l].price*=1e4;break;case 3:a.pdrs[l].price*=1e8;break}return a}return u})}}const B=He();function z(e){return e<10?e.toFixed(2).toString():e<1e3?e.toFixed(1).toString():e.toExponential(2).toString()}var Oe=G('<div class="producer"><p style="font-size: 20px; margin-top: 0;"></p> <p class="pdr_data svelte-1n4vi6l"> </p> <p class="pdr_data svelte-1n4vi6l"> </p> <p class="pdr_data svelte-1n4vi6l"> </p> <button>구매</button></div>'),Ue=G('<div style="display: flex;"></div>');function qe(e,s){ee(s,!1);const i=()=>ne(B,"$game",l),[l,u]=te();W();var a=Ue();Ne(a,5,()=>i().pdrs,Ce,(o,r,f)=>{var n=Oe();De(n,`border: solid 2px; border-color: ${f%4===0?"coral":f%4===1?"yellow":f%4===2?"lime":"aqua"}; flex: 1; padding: 5px; margin: 5px;`);var c=N(n);c.textContent=`생산기 ${f+1}`;var p=F(c,2),d=N(p);x(p);var w=F(p,2),t=N(w);x(w);var g=F(w,2),v=N(g);x(g);var h=F(g,2);x(n),ae((_,A,b)=>{xe(p,"title",`${C(r).purchase_count??""}개 구매함`),D(d,`수량: ${_??""}`),D(t,`배율: ${A??""}`),D(v,`가격: ${b??""}`)},[()=>z(C(r).amount),()=>z(C(r).mult),()=>z(C(r).price)]),Ae("click",h,()=>B.buyPdr(f)),L(o,n)}),x(a),L(e,a),re(),u()}var Le=G('<p class="mainResource"> </p> <!>',1);function Ke(e,s){ee(s,!1);const i=()=>ne(B,"$game",l),[l,u]=te();W();var a=Le(),o=Te(a),r=N(o);x(o);var f=F(o,2);qe(f,{}),ae(n=>D(r,`자원 : ${n??""}`),[()=>z(i().resource)]),L(e,a),re(),u()}export{Ke as component};
