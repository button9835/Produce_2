import{f as P,a as O}from"../chunks/uQ5VC-x7.js";import{i as ae}from"../chunks/65J18BE1.js";import{i as X,n as Se,v as K,h as R,V as we,o as ke,z as _,av as he,q as Ee,H as qe,t as ue,w as W,k as G,a5 as Ne,as as Ae,ac as ce,e as Ce,aw as J,j as ee,s as xe,a1 as pe,y as be,aq as ne,ax as Te,ay as Oe,az as Pe,aA as Ie,r as ye,p as $e,aB as Z,am as ze,ap as Re,f as Je,O as oe,R as ie,C as ve,aC as _e,T as S,S as E,U as w,Q as I,P as re}from"../chunks/BiTDESu1.js";import{e as H,s as N}from"../chunks/BfcE9Vy5.js";import{s as le,a as fe,i as te}from"../chunks/BWbQ-zy7.js";import{w as Me}from"../chunks/AdymCAY_.js";import{s as de}from"../chunks/CPnp-_tp.js";function De(e,i){return i}function Fe(e,i,t){for(var s=[],f=i.length,r,o=i.length,n=0;n<f;n++){let c=i[n];$e(c,()=>{if(r){if(r.pending.delete(c),r.done.add(c),r.pending.size===0){var m=e.outrogroups;se(ne(r.done)),m.delete(r),m.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=s.length===0&&t!==null;if(u){var a=t,p=a.parentNode;Re(p),p.append(a),e.items.clear()}se(i,!u)}else r={pending:new Set(i),done:new Set},(e.outrogroups??=new Set).add(r)}function se(e,i=!0){for(var t=0;t<e.length;t++)Je(e[t],i)}var ge;function Ue(e,i,t,s,f,r=null){var o=e,n=new Map;{var u=e;o=R?K(we(u)):u.appendChild(X())}R&&ke();var a=null,p=he(()=>{var g=t();return Te(g)?g:g==null?[]:ne(g)}),c,m=!0;function h(){b.fallback=a,He(b,c,o,i,s),a!==null&&(c.length===0?(a.f&J)===0?ye(a):(a.f^=J,B(a,null,o)):$e(a,()=>{a=null}))}var l=Se(()=>{c=_(p);var g=c.length;let A=!1;if(R){var y=Ee(o)===qe;y!==(g===0)&&(o=ue(),K(o),W(!1),A=!0)}for(var D=new Set,C=Ce,x=xe(),k=0;k<g;k+=1){R&&G.nodeType===Ne&&G.data===Ae&&(o=G,A=!0,W(!1));var T=c[k],$=s(T,k),v=m?null:n.get($);v?(v.v&&ce(v.v,T),v.i&&ce(v.i,k),x&&C.skipped_effects.delete(v.e)):(v=Be(n,m?o:ge??=X(),T,$,k,f,i,t),m||(v.e.f|=J),n.set($,v)),D.add($)}if(g===0&&r&&!a&&(m?a=ee(()=>r(o)):(a=ee(()=>r(ge??=X())),a.f|=J)),R&&g>0&&K(ue()),!m)if(x){for(const[d,q]of n)D.has(d)||C.skipped_effects.add(q.e);C.oncommit(h),C.ondiscard(()=>{})}else h();A&&W(!0),_(p)}),b={effect:l,items:n,outrogroups:null,fallback:a};m=!1,R&&(o=G)}function He(e,i,t,s,f){var r=i.length,o=e.items,n=e.effect.first,u,a=null,p=[],c=[],m,h,l,b;for(b=0;b<r;b+=1){if(m=i[b],h=f(m,b),l=o.get(h).e,e.outrogroups!==null)for(const $ of e.outrogroups)$.pending.delete(l),$.done.delete(l);if((l.f&J)!==0)if(l.f^=J,l===n)B(l,null,t);else{var g=a?a.next:n;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),z(e,a,l),z(e,l,g),B(l,g,t),a=l,p=[],c=[],n=a.next;continue}if((l.f&Z)!==0&&ye(l),l!==n){if(u!==void 0&&u.has(l)){if(p.length<c.length){var A=c[0],y;a=A.prev;var D=p[0],C=p[p.length-1];for(y=0;y<p.length;y+=1)B(p[y],A,t);for(y=0;y<c.length;y+=1)u.delete(c[y]);z(e,D.prev,C.next),z(e,a,D),z(e,C,A),n=A,a=C,b-=1,p=[],c=[]}else u.delete(l),B(l,n,t),z(e,l.prev,l.next),z(e,l,a===null?e.effect.first:a.next),z(e,a,l),a=l;continue}for(p=[],c=[];n!==null&&n!==l;)(u??=new Set).add(n),c.push(n),n=n.next;if(n===null)continue}(l.f&J)===0&&p.push(l),a=l,n=l.next}if(e.outrogroups!==null){for(const $ of e.outrogroups)$.pending.size===0&&(se(ne($.done)),e.outrogroups?.delete($));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||u!==void 0){var x=[];if(u!==void 0)for(l of u)(l.f&Z)===0&&x.push(l);for(;n!==null;)(n.f&Z)===0&&n!==e.fallback&&x.push(n),n=n.next;var k=x.length;if(k>0){var T=r===0?t:null;Fe(e,x,T)}}}function Be(e,i,t,s,f,r,o,n){var u=(o&Oe)!==0?(o&Pe)===0?be(t,!1,!1):pe(t):null,a=(o&Ie)!==0?pe(f):null;return{v:u,i:a,e:ee(()=>(r(i,u??t,a??f,n),()=>{e.delete(s)}))}}function B(e,i,t){if(e.nodes)for(var s=e.nodes.start,f=e.nodes.end,r=i&&(i.f&J)===0?i.nodes.start:t;s!==null;){var o=ze(s);if(r.before(s),s===f)return;s=o}}function z(e,i,t){i===null?e.effect.first=t:i.next=t,t===null?e.effect.last=i:t.prev=i}function Ve(e,i){return e==null?null:String(e)}function Y(e,i,t,s){var f=e.__style;if(R||f!==i){var r=Ve(i);(!R||r!==e.getAttribute("style"))&&(r==null?e.removeAttribute("style"):e.style.cssText=r),e.__style=i}return s}const V={resource:10,pdrs:[{amount:0,mult:1,price:10,purchase_count:0},{amount:0,mult:1,price:100,purchase_count:0},{amount:0,mult:1,price:1e4,purchase_count:0},{amount:0,mult:1,price:1e8,purchase_count:0}],prestige1_req:1e15,prestige1_eff:1,p2_unlocked:!1,prestige2_req:3,p1_exp_base:1.05,lastUpdate:Date.now()},me=JSON.parse(JSON.stringify(V.pdrs));function Le(){const{subscribe:e,update:i}=Me(V);function t(){i(s=>{const f=Date.now(),r=(f-s.lastUpdate)/1e3,o={...s};o.lastUpdate=f,o.resource+=o.pdrs[0].amount*o.pdrs[0].mult*r;for(let n=0;n<o.pdrs.length-1;n++){const u=o.pdrs[n+1];o.pdrs[n].amount+=u.amount*u.mult*r}return o}),window.requestAnimationFrame(t)}return typeof window<"u"&&t(),{subscribe:e,buyPdr:s=>i(f=>{if(f.pdrs[s].price<=f.resource){const r={...f};if(r.resource-=r.pdrs[s].price,r.pdrs[s].purchase_count++,r.pdrs[s].amount++,r.pdrs[s].purchase_count%10==0){switch(s){case 0:r.pdrs[s].price*=10;break;case 1:r.pdrs[s].price*=100;break;case 2:r.pdrs[s].price*=1e4;break;case 3:r.pdrs[s].price*=1e8;break}r.pdrs[s].mult*=2*f.prestige1_eff}return r}return f}),buyUntilNext10:s=>i(f=>{const r=f.pdrs[s],o=10-r.purchase_count%10,{totalCost:n,finalPrice:u,multIncrease:a,canAfford:p}=L(r,f.resource,f.prestige1_eff,s,o);if(!p)return f;const c={...f};return c.resource-=n,c.pdrs[s].purchase_count+=o,c.pdrs[s].amount+=o,c.pdrs[s].price=u,c.pdrs[s].mult*=a,c}),doPrestige1:()=>i(s=>{if(s.resource>=s.prestige1_req){const f={...s,resource:V.resource,pdrs:JSON.parse(JSON.stringify(me)),prestige1_req:s.prestige1_req**1.5};return f.p2_unlocked?f.prestige1_eff**=f.p1_exp_base:f.prestige1_eff*=1.25,f}return s}),doPrestige2:()=>i(s=>{if(s.prestige1_eff>=s.prestige2_req){const f={...s,resource:V.resource,pdrs:JSON.parse(JSON.stringify(me)),prestige1_req:V.prestige1_req,prestige1_eff:1,prestige2_req:s.prestige2_req**1.1};return f.p2_unlocked?f.p1_exp_base+=.05:f.p2_unlocked=!0,f}return s})}}const U=Le();function L(e,i,t,s,f){let r=JSON.parse(JSON.stringify(e)),o=0,n=1;for(let a=0;a<f;a++)if(o+=r.price,r.purchase_count++,r.purchase_count%10===0){switch(s){case 0:r.price*=10;break;case 1:r.price*=100;break;case 2:r.price*=1e4;break;case 3:r.price*=1e8;break}n*=2*t}const u=i>=o;return{totalCost:o,finalPrice:r.price,multIncrease:n,canAfford:u}}function M(e){return e<10?e.toFixed(2).toString():e<1e3?e.toFixed(1).toString():e.toExponential(2).toString()}function j(e){const i=Math.floor(e);return i<1e3?i.toString():i.toExponential(2).toString()}var Ye=P('<p class="pdr_data svelte-1n4vi6l"> </p>'),Ge=P('<p class="pdr_data svelte-1n4vi6l"> </p>'),Qe=P('<p class="pdr_data svelte-1n4vi6l"> </p>'),Xe=P('<p class="pdr_data svelte-1n4vi6l"> </p>'),Ke=P('<div class="producer"><p style="font-size: 20px; margin-top: 0;"></p> <!> <p class="pdr_data svelte-1n4vi6l"> </p> <!> <div style="display: flex;"><button class="buyButton svelte-1n4vi6l">1개 구매</button> <button class="buyButton svelte-1n4vi6l"> </button></div></div>'),We=P('<div style="display: flex;"></div>');function Ze(e,i){oe(i,!1);const t=()=>fe(U,"$game",s),[s,f]=le();let r=be(!1);ae();var o=We();H("keydown",_e,n=>{n.key==="Shift"&&ve(r,!0)}),H("keyup",_e,n=>{n.key==="Shift"&&ve(r,!1)}),Ue(o,5,()=>t().pdrs,De,(n,u,a)=>{const p=he(()=>10-_(u).purchase_count%10);var c=Ke();Y(c,`border: solid 2px; border-color: ${a%4===0?"coral":a%4===1?"yellow":a%4===2?"lime":"aqua"}; flex: 1; padding: 5px; margin: 5px;`);var m=E(c);m.textContent=`생산기 ${a+1}`;var h=w(m,2);{var l=v=>{var d=Ye(),q=E(d);S(d),I(F=>N(q,`구매한 횟수: ${F??""}`),[()=>j(_(u).purchase_count)]),O(v,d)},b=v=>{var d=Ge(),q=E(d);S(d),I((F,Q)=>{de(d,"title",`${F??""}개 구매함`),N(q,`수량: ${Q??""}`)},[()=>j(_(u).purchase_count),()=>j(_(u).amount)]),O(v,d)};te(h,v=>{_(r)?v(l):v(b,!1)})}var g=w(h,2),A=E(g);S(g);var y=w(g,2);{var D=v=>{var d=Qe(),q=E(d);S(d),I(F=>N(q,`다음 ${_(p)??""}개 가격: ${F??""}`),[()=>M(L(_(u),t().resource,t().prestige1_eff,a,_(p)).totalCost)]),O(v,d)},C=v=>{var d=Xe(),q=E(d);S(d),I((F,Q)=>{de(d,"title",`다음 ${_(p)??""}개 가격: ${F??""}`),N(q,`가격: ${Q??""}`)},[()=>M(L(_(u),t().resource,t().prestige1_eff,a,_(p)).totalCost),()=>M(_(u).price)]),O(v,d)};te(y,v=>{_(r)?v(D):v(C,!1)})}var x=w(y,2),k=E(x),T=w(k,2),$=E(T);S(T),S(x),S(c),I((v,d,q)=>{N(A,`배율: ${v??""}`),Y(k,`background-color: ${t().resource>=_(u).price?"lime":"gray"}; cursor: ${t().resource>=_(u).price?"pointer":"default"}; width:100%`),Y(T,`background-color: ${d??""}; cursor: ${q??""}; width:100%`),N($,`다음 가격까지 ${_(p)??""}개 구매`)},[()=>M(_(u).mult),()=>L(_(u),t().resource,t().prestige1_eff,a,_(p)).canAfford?"lime":"gray",()=>L(_(u),t().resource,t().prestige1_eff,a,_(p)).canAfford?"pointer":"default"]),H("click",k,()=>U.buyPdr(a)),H("click",T,()=>U.buyUntilNext10(a)),O(n,c)}),S(o),O(e,o),ie(),f()}var je=P("모든 생산기와 자원, 프레스티지 1을 초기화하고<br/>프레스티지 1의 지수 증가량을 0.05 늘립니다.<br/> ",1),er=P("모든 생산기와 자원, 프레스티지 1을 초기화하고<br/>프레스티지 1의 효과를 지수 연산으로 바꾸며 증가량을 0.05로 바꿉니다.<br/> ",1),rr=P('<div style="display: flex; justify-content: space-between;"><button><span style="font-size: larger;">프레스티지 1</span><br/>모든 생산기와 자원을 초기화하고<br/> <br/> </button> <button><span style="font-size: larger;">프레스티지 2</span><br/> <!></button></div>');function tr(e,i){oe(i,!1);const t=()=>fe(U,"$game",s),[s,f]=le();ae();var r=rr(),o=E(r),n=w(E(o),4),u=w(n,2);S(o);var a=w(o,2),p=w(E(a),3);{var c=h=>{var l=je(),b=w(re(l),4);I(g=>N(b,`조건: 프레스티지 1 효과 ${g??""} 이상`),[()=>M(t().prestige2_req)]),O(h,l)},m=h=>{var l=er(),b=w(re(l),4);I(g=>N(b,`조건: 프레스티지 1 효과 ${g??""} 이상`),[()=>M(t().prestige2_req)]),O(h,l)};te(p,h=>{t().p2_unlocked?h(c):h(m,!1)})}S(a),S(r),I(h=>{Y(o,`text-align: center; background-color: ${t().resource>=t().prestige1_req?"lime":"gray"}; cursor: ${t().resource>=t().prestige1_req?"pointer":"default"};`),N(n,`10개 구매할 때의 배율 증가량을 ${t().p2_unlocked?"1.05제곱합니다":"1.25배 늘립니다."}`),N(u,`조건 : ${h??""} 자원`),Y(a,`text-align: center; background-color: ${t().prestige1_eff>=t().prestige2_req?"lime":"gray"}; cursor: ${t().prestige1_eff>=t().prestige2_req?"pointer":"default"};`)},[()=>M(t().prestige1_req)]),H("click",o,()=>U.doPrestige1()),H("click",a,()=>U.doPrestige2()),O(e,r),ie(),f()}var sr=P('<p class="mainResource"> </p> <!> <!>',1);function cr(e,i){oe(i,!1);const t=()=>fe(U,"$game",s),[s,f]=le();ae();var r=sr(),o=re(r),n=E(o);S(o);var u=w(o,2);Ze(u,{});var a=w(u,2);tr(a,{}),I(p=>N(n,`자원 : ${p??""}`),[()=>M(t().resource)]),O(e,r),ie(),f()}export{cr as component};
