import{f as E,a as w,c as we}from"../chunks/CP5MiBxU.js";import{i as K}from"../chunks/CsH-H_zL.js";import{q as ae,h as U,W as Ee,f as se,k as Ne,j as qe,x as _,aA as he,n as Ae,H as Te,o as pe,t as oe,i as W,a5 as xe,as as Pe,ac as ve,d as Ce,g as ue,s as Oe,aq as fe,aN as Ie,a2 as de,w as ce,aO as Re,aP as ze,aQ as Fe,aR as D,r as ye,p as $e,aS as ne,am as Je,ap as Me,e as Ue,P as Z,A as X,aT as _e,U as S,S as j,T as N,V as $,R,Q as B}from"../chunks/IIHAX558.js";import{e as z,s as T}from"../chunks/Dxw7SQV5.js";import{s as ee,i as V,a as re}from"../chunks/DoSmYek3.js";import{w as De}from"../chunks/BrqKocvv.js";import{s as ge,r as He,a as Be}from"../chunks/C9Qt7c7K.js";function ke(e,u){return u}function Ve(e,u,s){for(var a=[],c=u.length,t,o=u.length,r=0;r<c;r++){let i=u[r];$e(i,()=>{if(t){if(t.pending.delete(i),t.done.add(i),t.pending.size===0){var d=e.outrogroups;le(fe(t.done)),d.delete(t),d.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=a.length===0&&s!==null;if(l){var n=s,p=n.parentNode;Me(p),p.append(n),e.items.clear()}le(u,!l)}else t={pending:new Set(u),done:new Set},(e.outrogroups??=new Set).add(t)}function le(e,u=!0){for(var s=0;s<e.length;s++)Ue(e[s],u)}var be;function Se(e,u,s,a,c,t=null){var o=e,r=new Map;{var l=e;o=U?ae(Ee(l)):l.appendChild(se())}U&&Ne();var n=null,p=he(()=>{var v=s();return Ie(v)?v:v==null?[]:fe(v)}),i,d=!0;function y(){g.fallback=n,Le(g,i,o,u,a),n!==null&&(i.length===0?(n.f&D)===0?ye(n):(n.f^=D,L(n,null,o)):$e(n,()=>{n=null}))}var f=qe(()=>{i=_(p);var v=i.length;let b=!1;if(U){var k=Ae(o)===Te;k!==(v===0)&&(o=pe(),ae(o),oe(!1),b=!0)}for(var x=new Set,C=Ce,O=Oe(),A=0;A<v;A+=1){U&&W.nodeType===xe&&W.data===Pe&&(o=W,b=!0,oe(!1));var I=i[A],q=a(I,A),m=d?null:r.get(q);m?(m.v&&ve(m.v,I),m.i&&ve(m.i,A),O&&C.skipped_effects.delete(m.e)):(m=Qe(r,d?o:be??=se(),I,q,A,c,u,s),d||(m.e.f|=D),r.set(q,m)),x.add(q)}if(v===0&&t&&!n&&(d?n=ue(()=>t(o)):(n=ue(()=>t(be??=se())),n.f|=D)),U&&v>0&&ae(pe()),!d)if(O){for(const[h,P]of r)x.has(h)||C.skipped_effects.add(P.e);C.oncommit(y),C.ondiscard(()=>{})}else y();b&&oe(!0),_(p)}),g={effect:f,items:r,outrogroups:null,fallback:n};d=!1,U&&(o=W)}function Le(e,u,s,a,c){var t=u.length,o=e.items,r=e.effect.first,l,n=null,p=[],i=[],d,y,f,g;for(g=0;g<t;g+=1){if(d=u[g],y=c(d,g),f=o.get(y).e,e.outrogroups!==null)for(const q of e.outrogroups)q.pending.delete(f),q.done.delete(f);if((f.f&D)!==0)if(f.f^=D,f===r)L(f,null,s);else{var v=n?n.next:r;f===e.effect.last&&(e.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),M(e,n,f),M(e,f,v),L(f,v,s),n=f,p=[],i=[],r=n.next;continue}if((f.f&ne)!==0&&ye(f),f!==r){if(l!==void 0&&l.has(f)){if(p.length<i.length){var b=i[0],k;n=b.prev;var x=p[0],C=p[p.length-1];for(k=0;k<p.length;k+=1)L(p[k],b,s);for(k=0;k<i.length;k+=1)l.delete(i[k]);M(e,x.prev,C.next),M(e,n,x),M(e,C,b),r=b,n=C,g-=1,p=[],i=[]}else l.delete(f),L(f,r,s),M(e,f.prev,f.next),M(e,f,n===null?e.effect.first:n.next),M(e,n,f),n=f;continue}for(p=[],i=[];r!==null&&r!==f;)(l??=new Set).add(r),i.push(r),r=r.next;if(r===null)continue}(f.f&D)===0&&p.push(f),n=f,r=f.next}if(e.outrogroups!==null){for(const q of e.outrogroups)q.pending.size===0&&(le(fe(q.done)),e.outrogroups?.delete(q));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||l!==void 0){var O=[];if(l!==void 0)for(f of l)(f.f&ne)===0&&O.push(f);for(;r!==null;)(r.f&ne)===0&&r!==e.fallback&&O.push(r),r=r.next;var A=O.length;if(A>0){var I=t===0?s:null;Ve(e,O,I)}}}function Qe(e,u,s,a,c,t,o,r){var l=(o&ze)!==0?(o&Fe)===0?ce(s,!1,!1):de(s):null,n=(o&Re)!==0?de(c):null;return{v:l,i:n,e:ue(()=>(t(u,l??s,n??c,r),()=>{e.delete(a)}))}}function L(e,u,s){if(e.nodes)for(var a=e.nodes.start,c=e.nodes.end,t=u&&(u.f&D)===0?u.nodes.start:s;a!==null;){var o=Je(a);if(t.before(a),a===c)return;a=o}}function M(e,u,s){u===null?e.effect.first=s:u.next=s,s===null?e.effect.last=u:s.prev=u}function Ye(e,u){return e==null?null:String(e)}function G(e,u,s,a){var c=e.__style;if(U||c!==u){var t=Ye(u);(!U||t!==e.getAttribute("style"))&&(t==null?e.removeAttribute("style"):e.style.cssText=t),e.__style=u}return a}const Q={resource:10,pdrs:[{amount:0,mult:1,price:10,purchase_count:0},{amount:0,mult:1,price:100,purchase_count:0},{amount:0,mult:1,price:1e4,purchase_count:0},{amount:0,mult:1,price:1e8,purchase_count:0}],autobuyers:[{unlocked:!0,enabled:!1},{unlocked:!0,enabled:!1},{unlocked:!0,enabled:!1},{unlocked:!0,enabled:!1}],prestige1_req:1e15,prestige1_eff:1,p2_unlocked:!1,prestige2_req:3,prestige2_eff:1,lastUpdate:Date.now()},me=JSON.parse(JSON.stringify(Q.pdrs));function Ge(){const{subscribe:e,update:u}=De(Q);function s(){u(a=>{const c=Date.now(),t=(c-a.lastUpdate)/1e3,o={...a};o.lastUpdate=c,o.resource+=o.pdrs[0].amount*o.pdrs[0].mult*t;for(let r=0;r<o.pdrs.length-1;r++){const l=o.pdrs[r+1];o.pdrs[r].amount+=l.amount*l.mult*t}for(let r=0;r<o.autobuyers.length;r++)if(o.autobuyers[r].enabled&&o.pdrs[r].price<=o.resource){const l=o.pdrs.map((n,p)=>{if(r!==p)return n;const i={...n};if(o.resource-=i.price,i.purchase_count++,i.amount++,o.p2_unlocked&&(i.mult*=o.prestige2_eff),i.purchase_count%10==0){switch(r){case 0:i.price*=100;break;case 1:i.price*=1e4;break;case 2:i.price*=1e7;break;case 3:i.price*=1e12;break}i.mult*=2*o.prestige1_eff}return i});o.pdrs=l}return o}),window.requestAnimationFrame(s)}return typeof window<"u"&&s(),{subscribe:e,buyPdr:a=>u(c=>{if(c.pdrs[a].price<=c.resource){const t={...c};if(t.resource-=t.pdrs[a].price,t.pdrs[a].purchase_count++,t.pdrs[a].amount++,t.p2_unlocked&&(t.pdrs[a].mult*=t.prestige2_eff),t.pdrs[a].purchase_count%10==0){switch(a){case 0:t.pdrs[a].price*=100;break;case 1:t.pdrs[a].price*=1e4;break;case 2:t.pdrs[a].price*=1e7;break;case 3:t.pdrs[a].price*=1e12;break}t.pdrs[a].mult*=2*c.prestige1_eff}return t}return c}),toggleAutobuyer:a=>u(c=>{const t={...c};return t.autobuyers[a].unlocked&&(t.autobuyers[a].enabled=!t.autobuyers[a].enabled),t}),buyUntilNext10:a=>u(c=>{const t=c.pdrs[a],o=10-t.purchase_count%10,{totalCost:r,finalPrice:l,multIncrease:n,canAfford:p}=Y(t,c.resource,c.prestige1_eff,a,o,c.p2_unlocked,c.prestige2_eff);if(!p)return c;const i={...c};return i.resource-=r,i.pdrs[a].purchase_count+=o,i.pdrs[a].amount+=o,i.pdrs[a].price=l,i.pdrs[a].mult*=n,i}),doPrestige1:()=>u(a=>a.resource>=a.prestige1_req?{...a,resource:Q.resource,pdrs:JSON.parse(JSON.stringify(me)),prestige1_req:a.prestige1_req**1.5,prestige1_eff:a.prestige1_eff*1.25}:a),doPrestige2:()=>u(a=>{if(a.prestige1_eff>=a.prestige2_req){const c={...a,resource:Q.resource,pdrs:JSON.parse(JSON.stringify(me)),prestige1_req:Q.prestige1_req,prestige1_eff:1,prestige2_req:a.prestige2_req**1.1};return c.p2_unlocked?c.prestige2_eff+=.01:(c.p2_unlocked=!0,c.prestige2_eff=1.01),c}return a})}}const J=Ge();function Y(e,u,s,a,c,t,o){let r=JSON.parse(JSON.stringify(e)),l=0,n=1;for(let i=0;i<c;i++)if(l+=r.price,r.purchase_count++,t&&(n*=o),r.purchase_count%10===0){switch(a){case 0:r.price*=100;break;case 1:r.price*=1e4;break;case 2:r.price*=1e7;break;case 3:r.price*=1e12;break}n*=2*s}const p=u>=l;return{totalCost:l,finalPrice:r.price,multIncrease:n,canAfford:p}}function F(e){return e<10?e.toFixed(2).toString():e<1e3?e.toFixed(1).toString():e.toExponential(2).toString()}function ie(e){const u=Math.floor(e);return u<1e3?u.toString():u.toExponential(2).toString()}var We=E('<p class="pdr_data svelte-1n4vi6l"> </p>'),Xe=E('<p class="pdr_data svelte-1n4vi6l"> </p>'),Ke=E('<p class="pdr_data svelte-1n4vi6l"> </p>'),Ze=E('<p class="pdr_data svelte-1n4vi6l"> </p>'),je=E('<div class="producer"><p style="font-size: 20px; margin-top: 0;"></p> <!> <p class="pdr_data svelte-1n4vi6l"> </p> <!> <div style="display: flex;"><button class="buyButton svelte-1n4vi6l">1개 구매</button> <button class="buyButton svelte-1n4vi6l"> </button></div></div>'),er=E('<div style="display: flex;"></div>');function rr(e,u){Z(u,!1);const s=()=>re(J,"$game",a),[a,c]=ee();let t=ce(!1);K();var o=er();z("keydown",_e,r=>{r.key==="Shift"&&X(t,!0)}),z("keyup",_e,r=>{r.key==="Shift"&&X(t,!1)}),Se(o,5,()=>s().pdrs,ke,(r,l,n)=>{const p=he(()=>10-_(l).purchase_count%10);var i=je();G(i,`border: solid 2px; border-color: ${n%4===0?"coral":n%4===1?"yellow":n%4===2?"lime":"aqua"}; flex: 1; padding: 5px; margin: 5px;`);var d=N(i);d.textContent=`생산기 ${n+1}`;var y=$(d,2);{var f=m=>{var h=We(),P=N(h);S(h),R(H=>T(P,`구매한 횟수: ${H??""}`),[()=>ie(_(l).purchase_count)]),w(m,h)},g=m=>{var h=Xe(),P=N(h);S(h),R((H,te)=>{ge(h,"title",`${H??""}개 구매함`),T(P,`수량: ${te??""}`)},[()=>ie(_(l).purchase_count),()=>ie(_(l).amount)]),w(m,h)};V(y,m=>{_(t)?m(f):m(g,!1)})}var v=$(y,2),b=N(v);S(v);var k=$(v,2);{var x=m=>{var h=Ke(),P=N(h);S(h),R(H=>T(P,`다음 ${_(p)??""}개 가격: ${H??""}`),[()=>F(Y(_(l),s().resource,s().prestige1_eff,n,_(p)).totalCost)]),w(m,h)},C=m=>{var h=Ze(),P=N(h);S(h),R((H,te)=>{ge(h,"title",`다음 ${_(p)??""}개 가격: ${H??""}`),T(P,`가격: ${te??""}`)},[()=>F(Y(_(l),s().resource,s().prestige1_eff,n,_(p)).totalCost),()=>F(_(l).price)]),w(m,h)};V(k,m=>{_(t)?m(x):m(C,!1)})}var O=$(k,2),A=N(O),I=$(A,2),q=N(I);S(I),S(O),S(i),R((m,h,P)=>{T(b,`배율: ${m??""}`),G(A,`background-color: ${s().resource>=_(l).price?"lime":"gray"}; cursor: ${s().resource>=_(l).price?"pointer":"default"}; width:100%`),G(I,`background-color: ${h??""}; cursor: ${P??""}; width:100%`),T(q,`다음 가격까지 ${_(p)??""}개 구매`)},[()=>F(_(l).mult),()=>Y(_(l),s().resource,s().prestige1_eff,n,_(p)).canAfford?"lime":"gray",()=>Y(_(l),s().resource,s().prestige1_eff,n,_(p)).canAfford?"pointer":"default"]),z("click",A,()=>J.buyPdr(n)),z("click",I,()=>J.buyUntilNext10(n)),w(r,i)}),S(o),w(e,o),j(),c()}var tr=E("모든 생산기와 자원, 프레스티지 1을 초기화하고<br/>프레스티지2의 효과를 0.01만큼 늘립니다.<br/> <br/> ",1),ar=E("모든 생산기와 자원, 프레스티지 1을 초기화하고<br/> 한 번 구매할 때마다 배율을 1.01배 늘립니다.<br/> <br/> ",1),sr=E('<div style="display: flex; justify-content: space-between;"><button><span style="font-size: larger;">프레스티지 1</span><br/>모든 생산기와 자원을 초기화하고<br/>10개 구매할 때의 배율 증가량을 1.25배 늘립니다.<br/> </button> <button><span style="font-size: larger;">프레스티지 2</span><br/> <!></button></div>');function or(e,u){Z(u,!1);const s=()=>re(J,"$game",a),[a,c]=ee();K();var t=sr(),o=N(t),r=$(N(o),6);S(o);var l=$(o,2),n=$(N(l),3);{var p=d=>{var y=tr(),f=$(B(y),4),g=$(f,2);R((v,b)=>{T(f,`현재 구매당 배율: ${v??""}배`),T(g,`조건: 프레스티지 1 효과 ${b??""} 이상`)},[()=>s().prestige2_eff.toFixed(2),()=>F(s().prestige2_req)]),w(d,y)},i=d=>{var y=ar(),f=$(B(y),4),g=$(f,2);R((v,b)=>{T(f,`조건: 프레스티지 1 효과 ${v??""} 이상 `),T(g,`현재 효과 : ${b??""}`)},[()=>F(s().prestige2_req),()=>F(s().prestige1_eff)]),w(d,y)};V(n,d=>{s().p2_unlocked?d(p):d(i,!1)})}S(l),S(t),R(d=>{G(o,`text-align: center; background-color: ${s().resource>=s().prestige1_req?"lime":"gray"}; cursor: ${s().resource>=s().prestige1_req?"pointer":"default"};`),T(r,`조건 : ${d??""} 자원`),G(l,`text-align: center; background-color: ${s().prestige1_eff>=s().prestige2_req?"lime":"gray"}; cursor: ${s().prestige1_eff>=s().prestige2_req?"pointer":"default"};`)},[()=>F(s().prestige1_req)]),z("click",o,()=>J.doPrestige1()),z("click",l,()=>J.doPrestige2()),w(e,t),j(),c()}var nr=E('<p style="margin-top: 20px;">해금 조건 :</p>'),ir=E('<input type="checkbox"/>'),ur=E('<div class="autobuyer svelte-1dryevn" style="border-radius:0; display:block"><span style="font-size:larger"></span> <!></div>'),lr=E('<p style="font-size:x-large;">자동화</p> <div style="display: flex;"></div>',1);function fr(e,u){Z(u,!1);const s=()=>re(J,"$game",a),[a,c]=ee();function t(l){J.toggleAutobuyer(l)}K();var o=lr(),r=$(B(o),2);Se(r,5,()=>s().autobuyers,ke,(l,n,p)=>{var i=ur(),d=N(i);d.textContent=`생산기 ${p+1}`;var y=$(d,2);{var f=v=>{var b=nr();w(v,b)},g=v=>{var b=ir();He(b),R(()=>Be(b,_(n).enabled)),z("change",b,()=>t(p)),w(v,b)};V(y,v=>{_(n).unlocked?v(g,!1):v(f)})}S(i),w(l,i)}),S(r),w(e,o),j(),c()}var cr=E("<!> <!>",1),pr=E('<p class="mainResource"> </p> <div class="tabs svelte-1uha8ag"><button class="svelte-1uha8ag">생산기</button> <button class="svelte-1uha8ag">자동화</button></div> <!>',1);function yr(e,u){Z(u,!1);const s=()=>re(J,"$game",a),[a,c]=ee();let t=ce("producers");K();var o=pr(),r=B(o),l=N(r);S(r);var n=$(r,2),p=N(n),i=$(p,2);S(n);var d=$(n,2);{var y=g=>{var v=cr(),b=B(v);rr(b,{});var k=$(b,2);or(k,{}),w(g,v)},f=g=>{var v=we(),b=B(v);{var k=x=>{fr(x,{})};V(b,x=>{_(t)==="automation"&&x(k)},!0)}w(g,v)};V(d,g=>{_(t)==="producers"?g(y):g(f,!1)})}R(g=>T(l,`자원 : ${g??""}`),[()=>F(s().resource)]),z("click",p,()=>X(t,"producers")),z("click",i,()=>X(t,"automation")),w(e,o),j(),c()}export{yr as component};
